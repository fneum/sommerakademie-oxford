
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Models without Networks &#8212; PyPSA Introduction</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=43cf7565" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'A-exploration-single-node';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Models with Networks" href="B-exploration-networks.html" />
    <link rel="prev" title="Sector Coupling" href="05-pypsa-sectors.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="PyPSA Introduction - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="PyPSA Introduction - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Overview
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introductions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-python-introduction.html">Basics <code class="docutils literal notranslate"><span class="pre">Python</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="02-pandas-introduction.html">Basics <code class="docutils literal notranslate"><span class="pre">pandas</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="03-pypsa-dispatch.html">Electricity Markets</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-pypsa-investment.html">Capacity Expansion</a></li>
<li class="toctree-l1"><a class="reference internal" href="05-pypsa-sectors.html">Sector Coupling</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Exploration Topics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Models without Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="B-exploration-networks.html">Models with Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="C-exploration-household.html">Models for Households</a></li>
<li class="toctree-l1"><a class="reference internal" href="D-exploration-green-fuels.html">Models for E-Fuel Production</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/fneum/sommerakademie-oxford/blob/main/sommerakademie-oxford/A-exploration-single-node.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/fneum/sommerakademie-oxford" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/fneum/sommerakademie-oxford/issues/new?title=Issue%20on%20page%20%2FA-exploration-single-node.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/A-exploration-single-node.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Models without Networks</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-foundation">Model Foundation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cost-assumptions">Cost Assumptions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series">Time Series</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-initialisation">Model Initialisation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#demand">Demand</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fossil-power-plants">Fossil Power Plants</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nuclear-power-plant">Nuclear Power Plant</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#biomass-power-plant">Biomass Power Plant</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wind-and-solar">Wind and Solar</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#batteries">Batteries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hydrogen">Hydrogen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#electric-vehicles">Electric Vehicles</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#emission-limit">Emission Limit</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#electrified-heating">Electrified Heating</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#temporal-clustering">Temporal Clustering</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploration">Exploration</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="models-without-networks">
<h1>Models without Networks<a class="headerlink" href="#models-without-networks" title="Link to this heading">#</a></h1>
<p>This section builds a simple country-scale energy system model without any networks (“copperplate”) to explore the role of different generation, conversion, storage and flexibility technologies, as well as the impact of different policy constraints, such as carbon budgets, carbon pricing, and/or renewable capacity targets.</p>
<p><img alt="network-model" src="_images/single-node.png" /></p>
<section id="model-foundation">
<h2>Model Foundation<a class="headerlink" href="#model-foundation" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pypsa</span>

<span class="n">RESOLUTION</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># hours</span>
<span class="n">SOLVER</span> <span class="o">=</span> <span class="s2">&quot;gurobi&quot;</span> <span class="c1"># or &#39;gurobi&#39;</span>
<span class="n">CO2_PRICE</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
<section id="cost-assumptions">
<h3>Cost Assumptions<a class="headerlink" href="#cost-assumptions" title="Link to this heading">#</a></h3>
<p>We take techno-economic assumptions from the <a class="reference external" href="https://github.com/PyPSA/technology-data">technology-data</a> repository which collects assumptions on costs and efficiencies:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YEAR</span> <span class="o">=</span> <span class="mi">2030</span>
<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://raw.githubusercontent.com/PyPSA/technology-data/master/outputs/costs_</span><span class="si">{</span><span class="n">YEAR</span><span class="si">}</span><span class="s2">.csv&quot;</span>
<span class="n">costs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">costs</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">costs</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;/kW&quot;</span><span class="p">),</span> <span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">*=</span> <span class="mf">1e3</span>
<span class="n">costs</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">({</span><span class="s2">&quot;discount rate&quot;</span><span class="p">:</span> <span class="mf">0.07</span><span class="p">,</span> <span class="s2">&quot;lifetime&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;FOM&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="n">costs</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;CCGT&quot;</span><span class="p">],</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span>
<span class="n">costs</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;CCGT&quot;</span><span class="p">],</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We calculate the capital costs (i.e. annualised investment costs, €/MW/a or €/MWh/a for storage), using the discount rate and lifetime.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">annuity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">r</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span> <span class="o">**</span> <span class="n">n</span><span class="p">)</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">annuity</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;discount rate&quot;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;lifetime&quot;</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">costs</span><span class="p">[</span><span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">costs</span><span class="p">[</span><span class="s2">&quot;FOM&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">costs</span><span class="p">[</span><span class="s2">&quot;investment&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="time-series">
<h3>Time Series<a class="headerlink" href="#time-series" title="Link to this heading">#</a></h3>
<p>The wind and solar capacity factor time series have been retrieved from <a class="reference external" href="https://model.energy">model.energy</a>. Go there to find more time series for other countries and plug them in here.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://model.energy/data/time-series-dd07c6bb61a102ba3399f062230a24fc.csv&quot;</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>onwind</th>
      <th>solar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01 00:00:00</th>
      <td>0.848</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2013-01-01 01:00:00</th>
      <td>0.846</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2013-01-01 02:00:00</th>
      <td>0.831</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The demand time series are exported from the <a class="reference external" href="https://transparency.entsoe.eu/">ENTSO-E Transparency Platform</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://tubcloud.tu-berlin.de/s/5ZcfnfC7mEwEGWt/download/electricity-demand.csv&quot;</span>
<span class="n">demand</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="s2">&quot;DE&quot;</span><span class="p">]</span>
<span class="n">demand</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2013-01-01 00:00:00    38617.5824
2013-01-01 01:00:00    37058.2418
2013-01-01 02:00:00    35576.9231
Name: DE, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="model-initialisation">
<h3>Model Initialisation<a class="headerlink" href="#model-initialisation" title="Link to this heading">#</a></h3>
<p>Add buses, carriers with their associated emissions and set snapshots.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">pypsa</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span>
<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Bus&quot;</span><span class="p">,</span> <span class="s2">&quot;electricity&quot;</span><span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">set_snapshots</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="n">carriers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;wind&quot;</span><span class="p">:</span> <span class="s2">&quot;dodgerblue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;solar&quot;</span><span class="p">:</span> <span class="s2">&quot;gold&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AC&quot;</span><span class="p">:</span> <span class="s2">&quot;navy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;electricity demand&quot;</span><span class="p">:</span> <span class="s2">&quot;navy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;electrified heating&quot;</span><span class="p">:</span> <span class="s2">&quot;steelblue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;oil&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coal&quot;</span><span class="p">:</span> <span class="s2">&quot;darkgray&quot;</span><span class="p">,</span>
    <span class="s2">&quot;lignite&quot;</span><span class="p">:</span> <span class="s2">&quot;sienna&quot;</span><span class="p">,</span>
    <span class="s2">&quot;OCGT&quot;</span><span class="p">:</span> <span class="s2">&quot;indianred&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CCGT&quot;</span><span class="p">:</span> <span class="s2">&quot;firebrick&quot;</span><span class="p">,</span>
    <span class="s2">&quot;biomass&quot;</span><span class="p">:</span> <span class="s2">&quot;olivedrab&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nuclear&quot;</span><span class="p">:</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span>
    <span class="s2">&quot;battery storage 1h&quot;</span><span class="p">:</span> <span class="s2">&quot;lightgreen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;battery storage 3h&quot;</span><span class="p">:</span> <span class="s2">&quot;lightgreen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;battery storage 6h&quot;</span><span class="p">:</span> <span class="s2">&quot;lightgreen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen turbine&quot;</span><span class="p">:</span> <span class="s2">&quot;blueviolet&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen import&quot;</span><span class="p">:</span> <span class="s2">&quot;lavenderblush&quot;</span><span class="p">,</span>
    <span class="s2">&quot;electrolysis&quot;</span><span class="p">:</span> <span class="s2">&quot;orchid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen storage&quot;</span><span class="p">:</span> <span class="s2">&quot;hotpink&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen&quot;</span><span class="p">:</span> <span class="s2">&quot;hotpink&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EV&quot;</span><span class="p">:</span> <span class="s2">&quot;cadetblue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EV demand&quot;</span><span class="p">:</span> <span class="s2">&quot;cadetblue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EV charger&quot;</span><span class="p">:</span> <span class="s2">&quot;limegreen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;V2G&quot;</span><span class="p">:</span> <span class="s2">&quot;limegreen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EV battery&quot;</span><span class="p">:</span> <span class="s2">&quot;teal&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">emissions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;wind&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;solar&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;AC&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;electricity demand&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;electrified heating&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;oil&quot;</span><span class="p">:</span> <span class="mf">0.257</span><span class="p">,</span>
    <span class="s2">&quot;coal&quot;</span><span class="p">:</span> <span class="mf">0.336</span><span class="p">,</span>
    <span class="s2">&quot;lignite&quot;</span><span class="p">:</span> <span class="mf">0.407</span><span class="p">,</span>
    <span class="s2">&quot;OCGT&quot;</span><span class="p">:</span> <span class="mf">0.198</span><span class="p">,</span>
    <span class="s2">&quot;CCGT&quot;</span><span class="p">:</span> <span class="mf">0.198</span><span class="p">,</span>
    <span class="s2">&quot;biomass&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;nuclear&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;battery storage 1h&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;battery storage 3h&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;battery storage 6h&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen import&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen turbine&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;electrolysis&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen storage&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;EV&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;EV demand&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;EV charger&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;V2G&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;EV battery&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Carrier&quot;</span><span class="p">,</span> <span class="n">carriers</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="n">carriers</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">co2_emissions</span><span class="o">=</span><span class="n">emissions</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="demand">
<h3>Demand<a class="headerlink" href="#demand" title="Link to this heading">#</a></h3>
<p>We add an electricity demand time series with a total annual demand of around 500 TWh/a for Germany.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Load&quot;</span><span class="p">,</span>
    <span class="s2">&quot;electricity demand&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">p_set</span><span class="o">=</span><span class="n">demand</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="fossil-power-plants">
<h3>Fossil Power Plants<a class="headerlink" href="#fossil-power-plants" title="Link to this heading">#</a></h3>
<p>Here, we add fossil power plants with their respective investment costs, marginal costs, efficiencies, and CO2 emissions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fossil</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;coal&quot;</span><span class="p">,</span> <span class="s2">&quot;lignite&quot;</span><span class="p">,</span> <span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;CCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;oil&quot;</span><span class="p">]:</span>

    <span class="n">marginal_cost</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">fossil</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">fossil</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">]</span>
        <span class="o">+</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">fossil</span><span class="p">,</span> <span class="s2">&quot;VOM&quot;</span><span class="p">]</span>
        <span class="o">+</span> <span class="n">CO2_PRICE</span> <span class="o">*</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">fossil</span><span class="p">,</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">fossil</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
        <span class="n">fossil</span><span class="p">,</span>
        <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
        <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">efficiency</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">fossil</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
        <span class="n">marginal_cost</span><span class="o">=</span><span class="n">marginal_cost</span><span class="p">,</span>
        <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">fossil</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
        <span class="n">carrier</span><span class="o">=</span><span class="n">fossil</span><span class="p">,</span>
    <span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="nuclear-power-plant">
<h3>Nuclear Power Plant<a class="headerlink" href="#nuclear-power-plant" title="Link to this heading">#</a></h3>
<p>Here, we set <code class="docutils literal notranslate"><span class="pre">p_min_pu=1</span></code> to force the plant to always run at full capacity. This is a simplification, as in reality nuclear plants can be ramped down, but not very flexibly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">marginal_cost</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;nuclear&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;nuclear&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">]</span>
    <span class="o">+</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;nuclear&quot;</span><span class="p">,</span> <span class="s2">&quot;VOM&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nuclear&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">efficiency</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;nuclear&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">marginal_cost</span><span class="o">=</span><span class="n">marginal_cost</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;nuclear&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;nuclear&quot;</span><span class="p">,</span>
    <span class="n">p_min_pu</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># forced baseload operation</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="biomass-power-plant">
<h3>Biomass Power Plant<a class="headerlink" href="#biomass-power-plant" title="Link to this heading">#</a></h3>
<p>Here, we limit the total energy output of the biomass plant by setting <code class="docutils literal notranslate"><span class="pre">e_sum_max</span></code> to represent a limited sustainable biomass potential, e.g. 50 TWh/a.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">marginal_cost</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;biomass&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;biomass&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">]</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;biomass&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">efficiency</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;biomass&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">marginal_cost</span><span class="o">=</span><span class="n">marginal_cost</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;biomass&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;biomass&quot;</span><span class="p">,</span>
    <span class="n">e_sum_max</span><span class="o">=</span><span class="mf">50e6</span><span class="p">,</span> <span class="c1"># limit</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="wind-and-solar">
<h3>Wind and Solar<a class="headerlink" href="#wind-and-solar" title="Link to this heading">#</a></h3>
<p>Here, we set <code class="docutils literal notranslate"><span class="pre">p_max_pu</span></code> to the time series of the renewable capacity factors.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;wind&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;wind&quot;</span><span class="p">,</span>
    <span class="n">p_max_pu</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">onwind</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;onwind&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;solar&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;solar&quot;</span><span class="p">,</span>
    <span class="n">p_max_pu</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">solar</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;solar&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="batteries">
<h3>Batteries<a class="headerlink" href="#batteries" title="Link to this heading">#</a></h3>
<p>Here, we add batteries with energy-to-power ratios of 1, 3, and 6 hours.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">max_hours</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]:</span>
    <span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&quot;StorageUnit&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;battery storage </span><span class="si">{</span><span class="n">max_hours</span><span class="si">}</span><span class="s2">h&quot;</span><span class="p">,</span>
        <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
        <span class="n">carrier</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;battery storage </span><span class="si">{</span><span class="n">max_hours</span><span class="si">}</span><span class="s2">h&quot;</span><span class="p">,</span>
        <span class="n">max_hours</span><span class="o">=</span><span class="n">max_hours</span><span class="p">,</span>
        <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery inverter&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span>
        <span class="o">+</span> <span class="n">max_hours</span> <span class="o">*</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery storage&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
        <span class="n">efficiency_store</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery inverter&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
        <span class="n">efficiency_dispatch</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery inverter&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
        <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">cyclic_state_of_charge</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="hydrogen">
<h3>Hydrogen<a class="headerlink" href="#hydrogen" title="Link to this heading">#</a></h3>
<p>Here, we add a hydrogen storage system with electrolysers, underground storage, and a hydrogen turbine. Additionally, there is a constant hydrogen demand in the order of 50% of the average electricity demand. There is also the option to import hydrogen at high cost.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Bus&quot;</span><span class="p">,</span> <span class="s2">&quot;hydrogen&quot;</span><span class="p">,</span> <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;hydrogen&quot;</span><span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Load&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen demand&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;hydrogen&quot;</span><span class="p">,</span>
    <span class="n">p_set</span><span class="o">=</span><span class="n">demand</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;hydrogen&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Link&quot;</span><span class="p">,</span>
    <span class="s2">&quot;electrolysis&quot;</span><span class="p">,</span>
    <span class="n">bus0</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">bus1</span><span class="o">=</span><span class="s2">&quot;hydrogen&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;electrolysis&quot;</span><span class="p">,</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">efficiency</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;electrolysis&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;electrolysis&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Link&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen turbine&quot;</span><span class="p">,</span>
    <span class="n">bus0</span><span class="o">=</span><span class="s2">&quot;hydrogen&quot;</span><span class="p">,</span>
    <span class="n">bus1</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;hydrogen turbine&quot;</span><span class="p">,</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">efficiency</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">tech</span> <span class="o">=</span> <span class="s2">&quot;hydrogen storage tank type 1 including compressor&quot;</span>
<span class="n">tech</span> <span class="o">=</span> <span class="s2">&quot;hydrogen storage underground&quot;</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Store&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen storage&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;hydrogen&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;hydrogen storage&quot;</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">tech</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
    <span class="n">e_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">e_cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">);</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen import&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;hydrogen&quot;</span><span class="p">,</span>
    <span class="n">p_nom</span><span class="o">=</span><span class="mi">10_000</span><span class="p">,</span>  <span class="c1"># large value</span>
    <span class="n">marginal_cost</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;hydrogen import&quot;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="electric-vehicles">
<h3>Electric Vehicles<a class="headerlink" href="#electric-vehicles" title="Link to this heading">#</a></h3>
<p>Here, we add electric vehicles (EV) as previously shown in the sector-coupling tutorial. Electric vehicles have an availability profile for when they are connected to the grid, and a requirement profile for the minimum state of charge they should have at certain times of the day (e.g. 75% at 6 AM). Fractions of the total fleet participate in smart charging and vehicle-to-grid (V2G). The charging power and battery sizes are based on a total of 40 million EVs with 50 kWh batteries and a maximum charging power of 11 kW.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">number_cars</span> <span class="o">=</span> <span class="mf">40e6</span>  <span class="c1">#  number of EV cars</span>
<span class="n">bev_charger_rate</span> <span class="o">=</span> <span class="mf">0.011</span>  <span class="c1"># 3-phase EV charger with 11 kW</span>
<span class="n">p_nom</span> <span class="o">=</span> <span class="n">number_cars</span> <span class="o">*</span> <span class="n">bev_charger_rate</span>

<span class="n">bev_energy</span> <span class="o">=</span> <span class="mf">0.05</span>  <span class="c1"># average battery size of EV in MWh</span>
<span class="n">bev_dsm_participants</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># share of cars that do smart charging</span>
<span class="n">e_nom</span> <span class="o">=</span> <span class="n">number_cars</span> <span class="o">*</span> <span class="n">bev_energy</span> <span class="o">*</span> <span class="n">bev_dsm_participants</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://tubcloud.tu-berlin.de/s/9r5bMSbzzQiqG7H/download/electric-vehicle-profile-example.csv&quot;</span>
<span class="n">p_set</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">p_set</span> <span class="o">=</span> <span class="n">p_set</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;1h&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">interpolate</span><span class="p">()</span>
<span class="n">p_set</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">p_set</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">365</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
<span class="n">p_set</span> <span class="o">=</span> <span class="n">p_set</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">snapshots</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://tubcloud.tu-berlin.de/s/E3PBWPfYaWwCq7a/download/electric-vehicle-availability-example.csv&quot;</span>
<span class="n">available</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">available</span> <span class="o">=</span> <span class="n">available</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;1h&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">interpolate</span><span class="p">()</span>
<span class="n">available</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">available</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">365</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
<span class="n">available</span> <span class="o">=</span> <span class="n">available</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">snapshots</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Bus&quot;</span><span class="p">,</span> <span class="s2">&quot;EV&quot;</span><span class="p">,</span> <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;EV&quot;</span><span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Load&quot;</span><span class="p">,</span> <span class="s2">&quot;EV demand&quot;</span><span class="p">,</span> <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;EV&quot;</span><span class="p">,</span> <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;EV demand&quot;</span><span class="p">,</span> <span class="n">p_set</span><span class="o">=</span><span class="n">p_set</span><span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Link&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EV charger&quot;</span><span class="p">,</span>
    <span class="n">bus0</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">bus1</span><span class="o">=</span><span class="s2">&quot;EV&quot;</span><span class="p">,</span>
    <span class="n">p_nom</span><span class="o">=</span><span class="n">p_nom</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;EV charger&quot;</span><span class="p">,</span>
    <span class="n">p_max_pu</span><span class="o">=</span><span class="n">available</span><span class="p">,</span>
    <span class="n">efficiency</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Link&quot;</span><span class="p">,</span>
    <span class="s2">&quot;V2G&quot;</span><span class="p">,</span>
    <span class="n">bus0</span><span class="o">=</span><span class="s2">&quot;EV&quot;</span><span class="p">,</span>
    <span class="n">bus1</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">p_nom</span><span class="o">=</span><span class="n">p_nom</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;V2G&quot;</span><span class="p">,</span>
    <span class="n">p_max_pu</span><span class="o">=</span><span class="n">available</span><span class="p">,</span>
    <span class="n">efficiency</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">requirement</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">snapshots</span><span class="p">)</span>
<span class="n">requirement</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">requirement</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">hour</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Store&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EV battery&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;EV&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;EV battery&quot;</span><span class="p">,</span>
    <span class="n">e_cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># state of charge at beginning = state of charge at the end</span>
    <span class="n">e_nom</span><span class="o">=</span><span class="n">e_nom</span><span class="p">,</span>
    <span class="n">e_min_pu</span><span class="o">=</span><span class="n">requirement</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="emission-limit">
<h3>Emission Limit<a class="headerlink" href="#emission-limit" title="Link to this heading">#</a></h3>
<p>Here, we could set a CO2 emission limit for the whole system, e.g. 100 MtCO2/a.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># n.add(</span>
<span class="c1">#     &quot;GlobalConstraint&quot;,</span>
<span class="c1">#     &quot;emission_limit&quot;,</span>
<span class="c1">#     carrier_attribute=&quot;co2_emissions&quot;,</span>
<span class="c1">#     sense=&quot;&lt;=&quot;,</span>
<span class="c1">#     constant=0,</span>
<span class="c1"># );</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="electrified-heating">
<h3>Electrified Heating<a class="headerlink" href="#electrified-heating" title="Link to this heading">#</a></h3>
<p>Here, we could add an additional load representing electricity demand from electrified heating (e.g. heat pumps) with a seasonal profile.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># url = &quot;https://tubcloud.tu-berlin.de/s/8KWqTAHEM9m8dFj/download/heat-demand.csv&quot;</span>
<span class="c1"># p_set = pd.read_csv(url, index_col=0, parse_dates=True).squeeze()</span>
<span class="c1"># p_set = p_set / p_set.max() * demand.mean() / 2</span>
<span class="c1"># n.add(</span>
<span class="c1">#     &quot;Load&quot;,</span>
<span class="c1">#     &quot;electrified heating&quot;,</span>
<span class="c1">#     bus=&quot;electricity&quot;,</span>
<span class="c1">#     p_set=p_set,</span>
<span class="c1">#     carrier=&quot;electrified heating&quot;,</span>
<span class="c1"># );</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="temporal-clustering">
<h3>Temporal Clustering<a class="headerlink" href="#temporal-clustering" title="Link to this heading">#</a></h3>
<p>To save some computation time, we only sample every third snapshot, which corresponds to a temporal resolution of 3 hours. Note that the snapshot weightings (the duration each time step represents) have to be adjusted accordingly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">set_snapshots</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">snapshots</span><span class="p">[::</span><span class="n">RESOLUTION</span><span class="p">])</span>
<span class="n">n</span><span class="o">.</span><span class="n">snapshot_weightings</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">RESOLUTION</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="exploration">
<h2>Exploration<a class="headerlink" href="#exploration" title="Link to this heading">#</a></h2>
<p>We could now already run the optimisation and look at a first set of results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span>
    <span class="n">solver_name</span><span class="o">=</span><span class="n">SOLVER</span><span class="p">,</span>
    <span class="n">log_to_console</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING:pypsa.consistency:The following loads have carriers which are not defined:
Index([&#39;electricity demand&#39;], dtype=&#39;object&#39;, name=&#39;Load&#39;)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.model: Solve problem using Gurobi solver
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AssertionError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">18</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">n</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="n">solver_name</span><span class="o">=</span><span class="n">SOLVER</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">log_to_console</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pypsa/optimization/optimize.py:383,</span> in <span class="ni">OptimizationAccessor.__call__</span><span class="nt">(self, snapshots, multi_investment_periods, transmission_losses, linearized_unit_commitment, model_kwargs, extra_functionality, assign_all_duals, solver_name, solver_options, compute_infeasibilities, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">381</span> <span class="k">if</span> <span class="n">extra_functionality</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">382</span>     <span class="n">extra_functionality</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">,</span> <span class="n">sns</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">383</span> <span class="n">status</span><span class="p">,</span> <span class="n">condition</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">solver_name</span><span class="o">=</span><span class="n">solver_name</span><span class="p">,</span> <span class="o">**</span><span class="n">solver_options</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">385</span> <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;ok&quot;</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">386</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">assign_solution</span><span class="p">()</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/linopy/model.py:1176,</span> in <span class="ni">Model.solve</span><span class="nt">(self, solver_name, io_api, explicit_coordinate_names, problem_fn, solution_fn, log_fn, basis_fn, warmstart_fn, keep_files, env, sanitize_zeros, sanitize_infinities, slice_size, remote, progress, **solver_options)</span>
<span class="g g-Whitespace">   </span><span class="mi">1173</span>     <span class="n">solver_name</span> <span class="o">=</span> <span class="n">available_solvers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">1175</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Solve problem using </span><span class="si">{</span><span class="n">solver_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> solver&quot;</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1176</span> <span class="k">assert</span> <span class="n">solver_name</span> <span class="ow">in</span> <span class="n">available_solvers</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Solver </span><span class="si">{</span><span class="n">solver_name</span><span class="si">}</span><span class="s2"> not installed&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1178</span> <span class="c1"># reset result</span>
<span class="g g-Whitespace">   </span><span class="mi">1179</span> <span class="bp">self</span><span class="o">.</span><span class="n">reset_solution</span><span class="p">()</span>

<span class="ne">AssertionError</span>: Solver gurobi not installed
</pre></div>
</div>
</div>
</div>
<p>But the exploration is left to you! Here are some ideas for sensitivities to explore and metrics to look at:</p>
<p><strong>Metrics:</strong></p>
<ul class="simple">
<li><p>Total annual system <strong>costs</strong> and breakdown by technology (billion €/a and % of total cost). This can be built from <code class="docutils literal notranslate"><span class="pre">n.statistics.opex()</span></code> and <code class="docutils literal notranslate"><span class="pre">n.statistics.capex()</span></code>.</p></li>
<li><p>Installed <strong>capacities</strong> of the different technologies (fossil power plants, wind, solar, battery, electrolysis, etc.). This can be accessed from <code class="docutils literal notranslate"><span class="pre">n.statistics.optimal_capacity()</span></code>.</p></li>
<li><p><strong>Energy mix</strong> and balances of different carrier as time series. This can be accessed from <code class="docutils literal notranslate"><span class="pre">n.statistics.energy_balance(groupby=[&quot;bus&quot;,</span> <span class="pre">&quot;carrier&quot;])</span></code> and plotted intereactively with <code class="docutils literal notranslate"><span class="pre">n.statistics.energy_balance.iplot.area(bus_carrier=&quot;AC&quot;)</span></code>.</p></li>
<li><p>Electricity <strong>prices</strong> (average and duration curve). These can be accessed under <code class="docutils literal notranslate"><span class="pre">n.buses_t.marginal_price</span></code>.</p></li>
<li><p>Level of CO2 <strong>emissions</strong>. This can be calculated using <code class="docutils literal notranslate"><span class="pre">n.generators_t.p</span> <span class="pre">/</span> <span class="pre">n.generators.efficiency</span> <span class="pre">*</span> <span class="pre">n.generators.carrier.map(n.carriers.co2_emissions)</span></code>.</p></li>
<li><p>Storage <strong>filling levels</strong> per technology over time. This can be accessed from <code class="docutils literal notranslate"><span class="pre">n.stores_t.e</span></code>.</p></li>
</ul>
<p><strong>Sensitivities:</strong></p>
<ul class="simple">
<li><p>Choose a different <strong>country</strong> for demand and renewables time series. This can be done by exchanging the data inputs at the top.</p></li>
<li><p>Vary the <strong>cost</strong> assumptions by changing the overall projection year (e.g. 2030, 2040, 2050). This can be done when loading the cost data.</p></li>
<li><p>Successively increase/decrease the investment cost of <strong>nuclear</strong> power. This can be done by modifying <code class="docutils literal notranslate"><span class="pre">n.generators.loc[&quot;nuclear&quot;,</span> <span class="pre">&quot;capital_cost&quot;]</span></code>.</p></li>
<li><p>Limit the <strong>flexibility of nuclear power plants</strong>, e.g. by requiring a minimum part load of 90%. This can be done by setting <code class="docutils literal notranslate"><span class="pre">n.generators.loc[&quot;nuclear&quot;,</span> <span class="pre">&quot;p_min_pu&quot;]</span> <span class="pre">=</span> <span class="pre">0.9</span></code>. You can also set ramp limits for other fossil generators (<code class="docutils literal notranslate"><span class="pre">ramp_limit_up</span></code> and <code class="docutils literal notranslate"><span class="pre">ramp_limit_down</span></code>).</p></li>
<li><p>Vary the <strong>cost of individual technologies</strong> along their learning curves (solar, battery, electrolysis, hydrogen storage, etc.). This can be done by changing their <code class="docutils literal notranslate"><span class="pre">capital_cost</span></code> attribute and/or their <code class="docutils literal notranslate"><span class="pre">efficiency</span></code> attribute.</p></li>
<li><p>Add a <strong>new storage technology</strong> with cost, efficiency and loss parameters.  This can be done with <code class="docutils literal notranslate"><span class="pre">n.add(&quot;StorageUnit&quot;,</span> <span class="pre">...)</span></code>. Look how it’s done for batteries.</p></li>
<li><p>Successively increase the <strong>CO2 price</strong> and observe the emissions. This can be done by modifying the marginal cost of emitting generators, <code class="docutils literal notranslate"><span class="pre">n.generators.loc[&quot;hard</span> <span class="pre">coal&quot;,</span> <span class="pre">&quot;marginal_cost&quot;]</span></code>.</p></li>
<li><p>Successively constrain the <strong>CO2 emission limit</strong>. This can be done by modifying the constant in <code class="docutils literal notranslate"><span class="pre">n.global_constraints</span></code>. The endogenous CO2 price can be found under <code class="docutils literal notranslate"><span class="pre">n.global_constraints.mu</span></code> (negative).</p></li>
<li><p>Enforce <strong>renewable capacity targets</strong> for wind and/or solar. This can be done by setting the <code class="docutils literal notranslate"><span class="pre">p_nom_min</span></code> attribute of the respective generators, e.g. <code class="docutils literal notranslate"><span class="pre">n.generators.loc[&quot;wind&quot;,</span> <span class="pre">&quot;p_nom&quot;]</span> <span class="pre">=</span> <span class="pre">100e3</span></code> for 100 GW.</p></li>
<li><p>Vary the <strong>gas price</strong>. This can be done by modifying the marginal cost of gas generators, <code class="docutils literal notranslate"><span class="pre">n.generators.loc[&quot;OCGT&quot;,</span> <span class="pre">&quot;marginal_cost&quot;]</span></code> and <code class="docutils literal notranslate"><span class="pre">n.generators.loc[&quot;CCGT&quot;,</span> <span class="pre">&quot;marginal_cost&quot;]</span></code>.</p></li>
<li><p>Constrain the availability of <strong>sustainable biomass</strong>. This can be done by setting the <code class="docutils literal notranslate"><span class="pre">e_sum_max</span></code> attribute of the biomass generator <code class="docutils literal notranslate"><span class="pre">n.generators.loc[&quot;biomass&quot;,</span> <span class="pre">&quot;e_sum_max&quot;]</span></code>.</p></li>
<li><p>Add <strong>upstream emissions</strong> for the biomass (so that it is not fully carbon-neutral). You can set this in <code class="docutils literal notranslate"><span class="pre">n.carriers.loc[&quot;biomass&quot;,</span> <span class="pre">&quot;co2_emissions&quot;]</span></code>.</p></li>
<li><p>Allow the <strong>import of green hydrogen</strong> at a given price, e.g. 100 €/MWh. You can also set a volume limit be setting <code class="docutils literal notranslate"><span class="pre">e_sum_max</span></code> (as for the biomass generator).</p></li>
<li><p>Vary the <strong>hydrogen demand</strong> relative to the electricity demand. This can be done by modifying <code class="docutils literal notranslate"><span class="pre">n.loads.loc[&quot;hydrogen</span> <span class="pre">demand&quot;,</span> <span class="pre">&quot;p_set&quot;]</span></code>.</p></li>
<li><p>Add electricity demand from the <strong>electrification of heating</strong> with strong seasonal demand variation. This can be done with the commented-out code cell above.</p></li>
<li><p>Vary the <strong>charging power</strong> of the electric vehicles.</p></li>
<li><p>Vary the <strong>battery size</strong> of the electric vehicles.</p></li>
<li><p>Vary the <strong>total number</strong> of electric vehicles.</p></li>
<li><p>Vary the <strong>electric vehicle state-of-charge</strong> requirements for the mornings.</p></li>
<li><p>Vary the <strong>share</strong> of electric vehicles participating in smart charging and vehicle-to-grid.</p></li>
<li><p>Run the optimisation for different <strong>weather years</strong>. You can retrieve 44 years of wind and solar capacity factor time series for European countries from <a class="reference external" href="https://renewables.ninja">renewables.ninja</a>.</p></li>
</ul>
<p><strong>Feel free to explore other ideas as well!</strong></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="05-pypsa-sectors.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Sector Coupling</p>
      </div>
    </a>
    <a class="right-next"
       href="B-exploration-networks.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Models with Networks</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-foundation">Model Foundation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cost-assumptions">Cost Assumptions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series">Time Series</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-initialisation">Model Initialisation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#demand">Demand</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fossil-power-plants">Fossil Power Plants</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nuclear-power-plant">Nuclear Power Plant</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#biomass-power-plant">Biomass Power Plant</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wind-and-solar">Wind and Solar</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#batteries">Batteries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hydrogen">Hydrogen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#electric-vehicles">Electric Vehicles</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#emission-limit">Emission Limit</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#electrified-heating">Electrified Heating</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#temporal-clustering">Temporal Clustering</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploration">Exploration</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Fabian Neumann and Jonas Finke
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>